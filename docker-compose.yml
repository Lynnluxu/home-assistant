version: '3'
services:
  homeassistant:
    container_name: home-assistant
    image: homeassistant/raspberrypi3-homeassistant:0.105.2
    volumes:
      - ./config/home-assistant/:/config
    environment:
      - TZ=Europe/Paris
    restart: always
    network_mode: host

  rhasspy:
    container_name: rhasspy
    # XXX: Version 2.4.17 of the image does not exist.
    image: "synesthesiam/rhasspy-server:latest"
    restart: always
    network_mode: host
    volumes:
      - "./config/rhasspy/profiles:/profiles"
    devices:
      - "/dev/snd:/dev/snd"
    command: --user-profiles /profiles --profile fr

  zigbee2mqtt:
    container_name: zigbee2mqtt
    image: koenkk/zigbee2mqtt:1.10.0
    volumes:
      - ./config/zigbee2mqtt:/app/data
      - /run/udev:/run/udev:ro
    devices:
      - /dev/ttyACM0:/dev/ttyACM0
    restart: always
    network_mode: host
    privileged: true
    environment:
      - TZ=Europe/Paris
